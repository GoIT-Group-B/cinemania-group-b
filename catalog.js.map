{"version":3,"file":"catalog.js","sources":["../src/js/generate-stars.js","../src/js/pop-up.js","../src/js/catalog-hero.js"],"sourcesContent":["export function generateStars(vote) {\n  const ratingOutOf5 = Math.round(vote) / 2; // 10 üzerinden → 5'e indir\n  const fullStars = Math.floor(ratingOutOf5); // Tam dolu yıldız\n  const halfStar = ratingOutOf5 % 1 >= 0.5 ? 1 : 0; // Yarım varsa 1\n  const emptyStars = 5 - fullStars - halfStar;\n\n  let stars = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    stars += '<span class=\"star\">★</span>';\n  }\n\n  if (halfStar) {\n    stars += '<span class=\"half-star\">⯨</span>'; // Alternatif: ✬ veya stil vereceğiz\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    stars += '<span class=\"star-empty\">☆</span>';\n  }\n\n  return stars;\n}","import { IMG_BASE_URL, ENDPOINTS } from './fetchMovies.js';\n\nconst modal = document.getElementById('movieDetailModal');\nconst poster = document.getElementById('detailPoster');\nconst title = document.getElementById('detailTitle');\nconst votes = document.getElementById('detailVotes');\nconst popularity = document.getElementById('detailPopularity');\nconst genresSpan = document.getElementById('detailGenres');\nconst overview = document.getElementById('detailOverview');\nconst closeBtn = document.getElementById('closeDetailModal');\n\nexport function openMovieDetailModal(movie, genreMap) {\n  try {\n    // Görsel\n    poster.src = `${IMG_BASE_URL}${ENDPOINTS.IMG_W500}${movie.poster_path}`;\n    poster.alt = movie.title;\n\n    // Metin verileri\n    title.textContent = movie.title;\n    votes.textContent = `${movie.vote_average} / ${movie.vote_count}`;\n    popularity.textContent = Math.floor(movie.popularity);\n\n    // Genre id'lerini alma (hem genre_ids hem de genres dizisi varsa kontrol et)\n    const genreIds = movie.genre_ids || (movie.genres ? movie.genres.map(g => g.id) : []);\n\n    // Genre map boş mu kontrolü\n    if (!genreMap || Object.keys(genreMap).length === 0) {\n      console.warn(\"Genre map boş veya tanımsız! Genre verileri henüz yüklenmemiş.\");\n      genresSpan.textContent = 'Unknown';\n    } else {\n      genresSpan.textContent = genreIds\n        .map(id => genreMap[id] || 'Unknown')\n        .join(', ');\n    }\n\n    overview.textContent = movie.overview || 'No description available.';\n\n    // Modal'ı göster\n    modal.classList.add('active');\n  } catch (error) {\n    console.error(\"openMovieDetailModal hatası:\", error);\n  }\n}\n\n// Modal kapatma\ncloseBtn.addEventListener('click', () => {\n  modal.classList.remove('active');\n});\n","import { fetchMovies, BASE_URL, ENDPOINTS, IMG_BASE_URL, fetchGenres } from './fetchMovies';\nimport { generateStars } from './generate-stars';\nimport { openMovieDetailModal }from './pop-up.js'\n\nasync function fetchTrendingMovie() {\n  const response = await fetchMovies(BASE_URL, ENDPOINTS.POPULAR_MOVIES);\n  const data = await response.results;\n\n  let index = 0;\n  const heroContainer = document.querySelector('.hero-container');\n\n  // İlk film\n  updateHero(data[index]);\n\n  setInterval(() => {\n    // Opaklığı sıfırla (kaybolsun)\n    heroContainer.style.opacity = '0';\n\n    // Bekle ve sonra değiştir\n    setTimeout(() => {\n      index = (index + 1) % data.length;\n      updateHero(data[index]);\n      \n      // Yeni film geldiğinde tekrar görünür yap\n      heroContainer.style.opacity = '1';\n    }, 500); // Geçiş efekti süresi\n  }, 5000);\n}\n\n\nfunction updateHero(movie) {\n  \n  const heroContainer = document.querySelector('.hero-container');\n  console.log(movie);\n\n  const backgroundUrl = `${IMG_BASE_URL}${ENDPOINTS.IMG_W1280}${movie.backdrop_path}`;\n    heroContainer.style.backgroundImage = `url('${backgroundUrl}')`;\n\nconst starsHTML = generateStars(movie.vote_average);\n\nheroContainer.innerHTML = `\n<div class=\"hero-content\">\n  <h1 class=\"hero-title\">${movie.title}</h1>\n  <div class=\"hero-rating\">${starsHTML}</div>\n  <p class=\"hero-description\">${movie.overview}</p>\n  <div class=\"hero-buttons\">\n    <button class=\"watch-trailer-btn\">Watch trailer</button>\n    <button class=\"more-details-btn\">More details</button>\n  </div>\n</div>\n`;  \nconst watchBtn = document.querySelector('.watch-trailer-btn');\n  watchBtn.addEventListener('click', () => openTrailerModal(movie.id));\n\n  const moreBtn = document.querySelector('.more-details-btn');\n  moreBtn.addEventListener('click', () => openMovieDetailModal(movie));\n\n}\n\nasync function fetchCategories() {\n  const response = await fetch(\n    `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`\n  );\n  const data = await response.json();\n  renderCategories(data.genres);\n}\n\nfunction renderCategories(genres) {\n  const categorySection = document.getElementById('category');\n  if (!categorySection) return;\n\n  categorySection.innerHTML = genres\n    .map(\n      genre => `\n        <div class=\"category-card\">${genre.name}</div>\n      `\n    )\n    .join('');\n}\n\nfetchTrendingMovie();\nfetchCategories();\n\nexport { fetchTrendingMovie, updateHero, fetchCategories, renderCategories };\n\nasync function openTrailerModal(movieId) {\n  const response = await fetch(`${BASE_URL}/movie/${movieId}/videos?api_key=52238d7fab5c2c01b99e751619dd16ec&language=en-US`);\n  const data = await response.json();\n\n  // YouTube videoları içinde trailer olanı bul\n  const trailer = data.results.find(video => video.type === 'Trailer' && video.site === 'YouTube');\n\n  const iframe = document.getElementById('trailerIframe');\n  const modal = document.getElementById('trailerModal');\n\n  if (trailer) {\n    iframe.src = `https://www.youtube.com/embed/${trailer.key}`;\n    modal.style.display = 'block';\n  } else {\n    alert(\"Trailer bulunamadı.\");\n  }\n}\n\n// Modal kapatma\ndocument.getElementById('closeTrailer').addEventListener('click', () => {\n  const modal = document.getElementById('trailerModal');\n  const iframe = document.getElementById('trailerIframe');\n\n  modal.style.display = 'none';\n  iframe.src = ''; // Temizle\n});\n"],"names":["generateStars","vote","ratingOutOf5","fullStars","halfStar","emptyStars","stars","i","modal","poster","title","votes","popularity","genresSpan","overview","closeBtn","openMovieDetailModal","movie","genreMap","IMG_BASE_URL","ENDPOINTS","genreIds","g","error","fetchTrendingMovie","data","fetchMovies","BASE_URL","index","heroContainer","updateHero","backgroundUrl","starsHTML","openTrailerModal","fetchCategories","renderCategories","genres","categorySection","genre","movieId","trailer","video","iframe"],"mappings":"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"}